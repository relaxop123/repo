<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Partager ma localisation via WhatsApp</title>
  <script>
    function shareLocationViaWhatsApp() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;
          // Crée un lien Google Maps avec la localisation exacte
          const googleMapsLink = `https://www.google.com/maps?q=${latitude},${longitude}`;
          // Prépare le message avec le lien de localisation
          const message = `Voici ma position actuelle : ${googleMapsLink}`;
          // Utilise l'URL de WhatsApp sans numéro pour permettre à l'utilisateur de choisir le destinataire
          const whatsappURL = "https://api.whatsapp.com/send?text=" + encodeURIComponent(message);
          // Redirige vers WhatsApp
          window.location.href = whatsappURL;
        }, function(error) {
          alert("Erreur de géolocalisation : " + error.message);
        });
      } else {
        alert("La géolocalisation n'est pas supportée par ce navigateur.");
      }
    }
    
    // L'utilisateur peut cliquer sur un bouton pour partager sa localisation
    window.onload = function() {
      // Optionnel : Vous pouvez déclencher automatiquement ou laisser l'utilisateur cliquer sur un bouton
      // Pour cet exemple, on attend un clic
    };
  </script>
</head>
<body>
  <h1>Partager ma localisation via WhatsApp</h1>
  <p>Cliquez sur le bouton ci-dessous pour partager votre position via WhatsApp.</p>
  <button onclick="shareLocationViaWhatsApp()">Partager ma position</button>
  <p>Si la redirection ne s'effectue pas automatiquement, <a href="#" onclick="shareLocationViaWhatsApp()">cliquez ici</a>.</p>
</body>
</html>
